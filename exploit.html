<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>NBA iframe postMessage test</title>
</head>
<body>
  <h2>Testing postMessage to NBA iframe</h2>

  <iframe 
    id="targetIframe" 
    src="https://gamecenter.nba.com/nba-fankit-v1/production/index.html?h=cdn-us.monterosa.cloud&p=559f4abc-a54e-4c87-98f5-acba50aeb7bb&e=dc5b4dbb-73d5-4b53-a59c-184e46e12b67#/" 
    width="800" 
    height="600" 
    style="border:1px solid black;">
  </iframe>

  <script>
    const iframe = document.getElementById('targetIframe');

    // Listener untuk menangkap response dari iframe
    window.addEventListener('message', (event) => {
      console.log('== Message Received ==');
      console.log(event.data);
    }, false);

    // Kirim pesan setelah iframe selesai dimuat
    iframe.addEventListener('load', () => {
      const message = {
        __gppCall: {
          command: "ping",
          parameter: null,
          callId: "demo123"
        }
      };

      // Kirim ke origin wildcard untuk bypass origin check (opsi terakhir)
      iframe.contentWindow.postMessage(message, '*');
    });
  </script>
</body>
</html>
