<!DOCTYPE html>
<html>
<head>
  <title>postMessage Test</title>
</head>
<body>
  <h1>Testing Cross-Domain postMessage</h1>

  <iframe id="target" src="https://picks.nba.com" width="800" height="600"></iframe>

  <script>
    const targetWindow = document.getElementById("target").contentWindow;

    // Payload yang kamu temukan
    const payload = {
      payload: {
        instance: {
          sourceConfiguration: {
            options: {
              consentData: {},
              abTesting: {},
              diagnostics: {},
              multiplexing: {}
            }
          },
          fetchIdData: {
            refererInfo: {
              stack: [null]
            },
            abTesting: {},
            uaHints: {
              brands: [{}],
              fullVersionList: []
            },
            trueLink: {}
          }
        },
        instanceState: {
          knownInstances: [],
          multiplexing: {}
        }
      }
    };

    // Kirim pesan setelah iframe siap
    setTimeout(() => {
      targetWindow.postMessage(payload, "*"); // "*" = semua origin
      console.log("Payload sent");
    }, 2000);

    // Dengarkan response dari target
    window.addEventListener("message", function(event) {
      console.log("Received response:", event.origin, event.data);
    });
  </script>
</body>
</html>
